# Otus Homework
## Сервис-календарь

### Скелет микросервиса

Цель: В результате выполнения ДЗ должен получиться базовый скелет микросервиса, который будет развиваться
в дальнейших ДЗ. Структура кода должна соответствовать подходу Clean Architecture.

В данном задании тренируются навыки: 
- декомпозиции предметной области;
- построения элементарной архитектуры проекта.

Завести в репозитории отдельную директорию для проекта "Календарь"
Создать внутри структуру директорий, соответствующую Clean Architecture.

Cоздать модели (структуры) календаря. Cоздать методы бизнес логики (методы у структур) для работы с этими структурами:
- добавление событий в хранилище
- удаление событий из хранилища
- изменение событий в хранилище
- листинг событий
- пр. на усмотрение студента

Создать объекты ошибок (error sentinels) соответсвующие бизнес ошибкам, например ErrDateBusy - данное время
уже занято другим событием. Реализовать хранение событий в памяти (т.е. просто складывать объекты в слайсы)
Реализовать Unit тесты проверяющие работу бизнес логики (в частности ошибки).

На данном этапе не нужно:
- Делать HTTP, GRPC и пр. интерфейсы к микросервису
- Писать .proto-файлы (это будет позже)
- Использовать СУБД

Критерии оценки: Критерии оценки:
- Созданы структуры, необходимые для реализации календаря
- Соблюдены принципы Clean Architecture
- Работа с хранилищем через интерфейс

Код должен проходить проверки `go vet` и `golint`.
У преподавателя должна быть возможность скачать и проверить пакет с помощью `go get` / `go test`.

### HTTP интерфейс

Цель: Реализовать HTTP интерфейс для сервиса Календаря.  
Тех. задание: https://github.com/OtusTeam/Go/blob/master/project-calendar.md

Цель данного задания - отработать навыки работы со стандартной HTTP библиотекой, поэтому технологии JSONRPC,
Swagger и т.п. НЕ используются. В директории с проектом создать отдельный пакет для Web-сервера. Реализовать
вспомогательные функции для сериализации объектов доменной области в JSON. Реализовать вспомогательные функции
для парсинга и валидации параметров методов `/create_event` и `/update_event`. Реализовать HTTP обработчики для каждого
из методов API, используя вспомогательные функции и объекты доменной области. Реализовать middleware
для логирования запросов.

Методы API:
```
POST /create_event
POST /update_event
POST /delete_event
GET /events_for_day
GET /events_for_week
GET /events_for_month
```

Параметры передаются в виде www-url-form-encoded (т.е. обычные `user_id=3&date=2019-09-09`)  
В GET методах параметры передаются через queryString, в POST через тело запроса.

В результате каждого запроса должен возвращаться JSON документ содержащий
- либо {"result": "..."} в случае успешного выполнения метода
- либо {"error": "..."} в случае ошибки бизнес-логики

Критерии оценки: Все методы должны быть реализованы
Бизнес логика (пакет internal/domain в примере) НЕ должен зависеть от кода HTTP сервера  
В случае ошибки бизнес-логики сервер должен возвращать HTTP 200  
В случае ошибки входных данных (невалидный int например) сервер должен возвращать HTTP 400  
В случае остальных ошибок сервер должен возвращать HTTP 500  
Web-сервер должен запускаться на порту указанном в конфиге и выводить в лог каждый обработанный запрос.
